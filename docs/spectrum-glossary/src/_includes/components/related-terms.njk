{% macro relatedTerms(termIds, allTerms) %}
{% if termIds and termIds.length > 0 %}
  <section class="related-terms">
    <h3>Related Terms</h3>
    <div class="related-terms-grid">
      {% for termId in termIds %}
        {% set relatedTerm = allTerms | termById(termId) %}
        {% if relatedTerm %}
          <a href="{{ ('/terms/' ~ relatedTerm.registryType ~ '/' ~ relatedTerm.id ~ '/') | pathPrefix(basePath) }}" class="related-term-link">
            <div class="related-term-card">
              <strong>{{ relatedTerm.label or relatedTerm.id }}</strong>
              {% if relatedTerm.description %}
                <p>{{ relatedTerm.description | truncate(80) }}</p>
              {% endif %}
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </section>
{% endif %}
{% endmacro %}
